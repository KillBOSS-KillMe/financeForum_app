(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-articleDetail"],{"08c3":function(t,e,i){"use strict";i.r(e);var a=i("bb50"),n=i("baaa");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("cca5");var s,l=i("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"4d0827a2",null,!1,a["a"],s);e["default"]=c.exports},"1d5f":function(t,e,i){var a=i("6bc4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("260b0031",a,!0,{sourceMap:!1,shadowMode:!1})},"42c7":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f499")),o=a(i("a3a0")),s=getApp(),l={data:function(){return{userInfo:{},focus:!1,isShow:"0",isHide:"0",info:{},nodes:[],commentList:[],articleDetail:null,options:null,imgUrl:"",page:"1",postContent:"",just_landlord:"",comment_id:"",isSex:"0"}},onLoad:function(t){this.options=t,this.imgUrl=o.default.imgUrl,this.userInfo=s.globalData.userInfo,console.log(this.userInfo)},onShow:function(){this.getArticleDetail(),this.getComment()},onShareAppMessage:function(){var t=this.getPageUrl();return{title:this.articleDetail.title,path:t}},methods:{goVIPPage:function(t){var e=this;if("normal"==this.userInfo.type){var i=t.currentTarget.dataset.content_type;"member"==i&&uni.showModal({title:"提示",content:"是否前往开通会员",success:function(t){t.confirm?e.goVip():t.cancel}})}},goVip:function(){uni.navigateTo({url:"/pages/meVIP"})},getContent:function(t){this.postContent=t.detail.value,console.log(t)},getArticleDetail:function(){var t=this;uni.showLoading({title:"加载中..."}),uni.request({url:"".concat(o.default.requestUrl,"/posts/show"),method:"GET",header:{authorization:s.globalData.token},data:{post_id:this.options.id},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),200==e.data.status_code?(t.articleDetail=e.data,"f"==t.articleDetail.user.sex&&(t.isSex="1")):(uni.showToast({title:e.data.message,icon:"none",duration:2e3}),setTimeout(function(t){uni.navigateBack({delta:1})},2e3))}})},shareFriend:function(){this.share("WXSceneSession")},shareFriendcricle:function(){this.share("WXSenceTimeline")},getPageUrl:function(){var t=getCurrentPages();t=t[t.length-1];var e=t.route,i=t.options,a="?";for(var n in i)a+=n,a+="=",a+=i[n],a+="&";return a=a.substring(0,a.length-1),e+=a,e},share:function(t){var e=this.getPageUrl();uni.share({provider:"weixin",scene:t,type:0,href:e,title:this.articleDetail.title,summary:"",imageUrl:"",success:function(t){console.log("success:"+(0,n.default)(t))},fail:function(t){console.log("fail:"+(0,n.default)(t))}})},postReward:function(){var t=this;uni.showLoading({title:"打赏中..."}),uni.request({url:"".concat(o.default.requestUrl,"/posts/reward"),method:"GET",header:{authorization:s.globalData.token},data:{post_id:this.articleDetail.id},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"200"==e.data.status_code?(uni.showToast({title:"打赏成功"}),t.articleDetail.rewards_count+=1):uni.showToast({title:"打赏失败",icon:"none"})}})},addCollection:function(){var t=this;uni.showLoading({title:"加载中...",duration:1e6}),uni.request({url:"".concat(o.default.requestUrl,"/user/add_collection"),method:"POST",header:{authorization:s.globalData.token},data:{post_id:this.articleDetail.id},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"1"==e.data.status_code?(t.articleDetail.is_collections,uni.showToast({title:e.data.message})):uni.showToast({title:e.data.message,icon:"none"})}})},delCollection:function(){var t=this;uni.showLoading({title:"加载中...",duration:1e6}),uni.request({url:"".concat(o.default.requestUrl,"/user/del_collection"),method:"POST",header:{authorization:s.globalData.token},data:{post_id:this.articleDetail.id},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"1"==e.data.status_code?(t.articleDetail.is_collections,uni.showToast({title:e.data.message})):uni.showToast({title:e.data.message,icon:"none"})}})},addFollow:function(){var t=this;uni.showLoading({title:"加载中...",duration:1e6}),uni.request({url:"".concat(o.default.requestUrl,"/user/add_follow"),method:"POST",header:{authorization:s.globalData.token},data:{follow_id:this.articleDetail.user_id},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"1"==e.data.status_code?(uni.showToast({title:e.data.message}),t.articleDetail.is_follow=1):uni.showToast({title:e.data.message,icon:"none"})}})},getComment:function(){var t=this;uni.request({url:"".concat(o.default.requestUrl,"/posts/post-comments"),method:"GET",header:{authorization:s.globalData.token},data:{post_id:this.options.id,just_landlord:this.just_landlord,page:this.page,page_size:"10"},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e,"**********"),"200"==e.data.status_code&&(t.commentList=t.commentList.concat(e.data.data))}})},postDiscuss:function(){""==this.postContent?uni.showToast({title:"请输入发表内容",icon:"none"}):"0"==this.isShow?this.getPost():"1"==this.isShow&&this.postReply()},getPost:function(){var t=this;uni.showLoading({title:"评论提交中..."}),uni.request({url:"".concat(o.default.requestUrl,"/posts/send-comment"),method:"POST",header:{authorization:s.globalData.token},data:{post_id:this.options.id,content:this.postContent},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"200"==e.data.status_code?(uni.showToast({title:e.data.message,icon:"none"}),t.postContent=" "):uni.showToast({title:"发表失败",icon:"none"})}})},reply:function(t,e){console.log(t,e),this.comment_id=t,this.isShow=e,this.focus=!0},postReply:function(){var t=this;uni.showLoading({title:"评论发布中..."}),uni.request({url:"".concat(o.default.requestUrl,"/posts/send-reply"),method:"POST",header:{authorization:s.globalData.token},data:{comment_id:this.comment_id,content:this.postContent},success:function(e){uni.hideLoading(),e=o.default.null2str(e),console.log(e),"200"==e.data.status_code?(uni.showToast({title:e.data.message,icon:"none"}),t.postContent=" ",t.isShow="0"):uni.showToast({title:"发表失败",icon:"none"})}})},commentLandlord:function(t){console.log(t),this.just_landlord=t,this.commentList=[],this.page="1",this.getComment()},clickZan:function(t){var e=this;this.isHide="1",uni.showLoading({title:"点赞中..."}),uni.request({url:"".concat(o.default.requestUrl,"/posts/like"),method:"GET",header:{authorization:s.globalData.token},data:{post_id:this.articleDetail.id},success:function(t){uni.hideLoading(),t=o.default.null2str(t),console.log(t),"200"==t.data.status_code?(uni.showToast({title:"点赞成功",icon:"none"}),e.articleDetail.like+=1,e.articleDetail.is_collections=1):uni.showToast({title:"点赞失败",icon:"none"})}})},onReachBottom:function(){this.page++,this.getComment()}}};e.default=l},"6bc4":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"uni-button[data-v-4d0827a2]{background:#fff;position:relative;display:block;margin-left:auto;margin-right:auto;padding-left:14px;padding-right:14px;box-sizing:border-box;font-size:18px;text-align:center;text-decoration:none;line-height:2.55555556;border-radius:5px;-webkit-tap-highlight-color:transparent;overflow:hidden;color:#000;background-color:#f8f8f8;margin:0}uni-button[data-v-4d0827a2]{border-radius:0}uni-button[data-v-4d0827a2]{background-color:#fff}uni-button[data-v-4d0827a2]:after{border:none}.articleDetail[data-v-4d0827a2]{width:%?750?%}.articleDetail .content[data-v-4d0827a2]{width:%?690?%;padding:%?20?% %?30?%}.articleDetail .content .title[data-v-4d0827a2]{font-size:%?34?%;font-weight:600;color:#333;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.articleDetail .content .info[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?30?% 0;border-bottom:%?1?% dashed #ececec;border-top:%?1?% dashed #ececec;padding:%?30?% 0}.articleDetail .content .info .left[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.articleDetail .content .info .left>uni-image[data-v-4d0827a2]{width:%?90?%;height:%?90?%;border-radius:%?90?%;margin-right:%?20?%}.articleDetail .content .info .left .leftTitle>uni-text[data-v-4d0827a2]{font-size:%?28?%;color:#333;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.articleDetail .content .info .left .leftTitleBottom[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.articleDetail .content .info .left .leftTitleBottom>uni-text[data-v-4d0827a2]{color:#666;font-size:%?24?%;margin-right:%?20?%;white-space:nowrap}.articleDetail .follow[data-v-4d0827a2]{font-size:%?22?%!important;color:#fff!important;font-weight:600;background:#2390dc;width:%?80?%;height:%?48?%;line-height:%?48?%;text-align:center;border-radius:%?10?%}.read[data-v-4d0827a2]{width:%?100?%;height:%?90?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:space-between;align-content:space-between;-webkit-flex-wrap:wrap;flex-wrap:wrap}.read uni-view[data-v-4d0827a2]{width:%?100?%;font-size:%?20?%;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.read uni-view .iconfont[data-v-4d0827a2]{margin-right:%?6?%}.postCom[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?28?%;color:#666;margin:%?8?% 0 %?14?%;background:#f0f0f0;border-radius:%?40?%;padding:%?10?% %?16?%}.postCom uni-text[data-v-4d0827a2]{white-space:nowrap}.postCom .cur[data-v-4d0827a2]{color:#2390dc}.content .tip[data-v-4d0827a2]{font-size:%?28?%;color:#333;font-weight:600;margin-top:%?30?%}.content .tip>uni-view>uni-text[data-v-4d0827a2]{display:inline-block;color:#ee4d4d}.content .share[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?30?%}.content .share uni-text[data-v-4d0827a2],.reward uni-text[data-v-4d0827a2]{font-size:%?28?%;color:#333}.content .share .iconfont[data-v-4d0827a2]{width:%?60?%;font-size:%?60?%;color:green;margin-left:%?20?%}.reward .iconText[data-v-4d0827a2]{width:%?65?%;height:%?65?%;border-radius:%?65?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center\n\t/* background-color: ; */}.content .share uni-image[data-v-4d0827a2]{width:%?64?%;height:%?64?%;border-radius:%?64?%;margin-left:%?36?%}.reward[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin:%?30?% auto}.reward uni-image[data-v-4d0827a2]{width:%?64?%;height:%?64?%;border-radius:%?64?%}.reward uni-text[data-v-4d0827a2]{text-align:center;width:%?690?%;margin-top:%?10?%}.comment[data-v-4d0827a2]{padding-bottom:%?110?%\n\t/* padding: 30rpx 30rpx 100rpx; */}.comment .commentTitle[data-v-4d0827a2]{padding:%?30?%;width:%?690?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e4e4e4}.comment .commentTit[data-v-4d0827a2]{font-size:%?30?%;color:#333;font-weight:600}.comment .commentLandlord[data-v-4d0827a2]{font-size:%?26?%;color:#2390dc;font-weight:600;border:%?1?% solid #2390dc;padding:%?6?% %?14?%;border-radius:%?10?%}.comment .list[data-v-4d0827a2]{width:%?690?%;padding:0 %?30?%}.comment .item[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?30?% 0;border-bottom:%?1?% solid #e4e4e4}.comment .item>uni-image[data-v-4d0827a2]{width:%?90?%;height:%?90?%;border-radius:%?90?%}.comment .right[data-v-4d0827a2]{width:%?580?%}.comment .rightName[data-v-4d0827a2]{font-size:%?28?%;color:#333;font-weight:600;\n\t/* margin-bottom: 10rpx; */overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.comment .rightContent[data-v-4d0827a2]{font-size:%?28?%;color:#666;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;margin-bottom:%?10?%}.comment .rightBottom[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.comment .flex[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.comment .flex>uni-text[data-v-4d0827a2]{color:#666;font-size:%?24?%;margin-right:%?36?%}.comment .itemListHead[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.itemListHeadLeft[data-v-4d0827a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.rightMember[data-v-4d0827a2]{background:#d2bf8e;color:#fff;font-size:%?18?%;padding:%?1?% %?10?%;border-radius:%?10?%;margin-left:%?20?%}.reward .money[data-v-4d0827a2]{font-size:%?20?%;font-weight:700;color:#b8b8b8}.bottom[data-v-4d0827a2]{width:%?690?%;padding:0 %?30?%;border-top:%?1?% solid #e4e4e4;\n\t/* height: 98rpx; */height:%?98?%;position:fixed;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff}.bottom uni-input[data-v-4d0827a2]{width:%?508?%;border:%?1?% solid #b8b8b8;height:%?70?%;line-height:%?70?%;border-radius:%?40?%;padding:0 %?20?%;color:#999;font-size:%?24?%\n\t/* margin-right: 20rpx; */}.bottom .iconfont[data-v-4d0827a2]{font-size:%?44?%;font-weight:600;\n\t/* color: #999; */margin-left:%?20?%}.icon[data-v-4d0827a2]{color:#999}.iconfont.active[data-v-4d0827a2]{color:#2390dc!important}.curRed[data-v-4d0827a2]{color:#d4237a}.iconText[data-v-4d0827a2]{width:%?140?%;height:%?140?%;border-radius:%?140?%;background:#2390dc;color:#fff}",""])},baaa:function(t,e,i){"use strict";i.r(e);var a=i("42c7"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},bb50:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"articleDetail"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(t.articleDetail.title))]),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{attrs:{src:t.imgUrl+t.articleDetail.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"leftTitle"},[i("v-uni-text",[t._v(t._s(t.articleDetail.user.name))]),i("v-uni-view",{staticClass:"leftTitleBottom"},["member"==t.articleDetail.user.type?i("v-uni-text",{staticStyle:{color:"#ceb277"}},[t._v("VIP")]):t._e(),i("v-uni-text",[t._v(t._s(t.articleDetail.user.created_at))]),i("v-uni-view",[0==t.articleDetail.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow.apply(void 0,arguments)}}},[t._v("关注")]):t._e(),1==t.articleDetail.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow.apply(void 0,arguments)}}},[t._v("已关注")]):t._e()],1)],1)],1)],1),i("v-uni-view",{staticClass:"read"},[i("v-uni-view",[i("uni-icon",{staticClass:"iconfont iconiconset0207 icon",attrs:{type:""}}),t._v(t._s(t.articleDetail.reading))],1),i("v-uni-view",[i("uni-icon",{staticClass:"iconfont icondianzan icon",attrs:{type:""}}),t._v(t._s(t.articleDetail.like))],1)],1)],1),t._l(t.articleDetail.extras,function(e,a){return[0==e.need_reply?i("v-uni-rich-text",{key:a+"_0",attrs:{nodes:e.content,"data-content_type":e.content_type},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goVIPPage.apply(void 0,arguments)}}}):t._e()]}),i("v-uni-view",{staticClass:"share"},[i("v-uni-text",[t._v("分享至")])],1)],2),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"reward"},[i("v-uni-view",{staticClass:"iconText",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postReward.apply(void 0,arguments)}}},[t._v("赏")]),i("v-uni-text",[t._v("觉得不错，打个赏~")]),i("v-uni-view",{staticClass:"money"},[t._v(t._s(t.articleDetail.rewards_count)+"人已经打赏")])],1),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticClass:"comment"},[i("v-uni-view",{staticClass:"commentTitle"},[i("v-uni-text",{staticClass:"commentTit"},[t._v("评论")]),i("v-uni-text",{staticClass:"commentLandlord",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commentLandlord(t.articleDetail.user_id)}}},[t._v("只看楼主")])],1),i("v-uni-view",{staticClass:"list"},[t._l(t.commentList,function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"item"},[i("v-uni-image",{attrs:{src:t.imgUrl+e.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"itemListHead"},[i("v-uni-view",{staticClass:"itemListHeadLeft"},[i("v-uni-text",{staticClass:"rightName"},[t._v(t._s(e.user.name))]),i("uni-icon",{staticClass:"iconfont iconnan",class:["active","1"==t.isSex?"curRed":""],attrs:{type:""}}),"member"==e.user.type?i("v-uni-text",{staticClass:"rightMember"},[t._v(t._s(e.user.deploy.vipuserlevel.level_name))]):i("v-uni-text",{staticClass:"rightMember",staticStyle:{background:"#2390DC"}},[t._v(t._s(e.user.deploy.userlevel.level_name))])],1),i("uni-icon",{staticClass:"iconfont icondiandian icon",attrs:{type:""}})],1),i("v-uni-text",{staticClass:"rightContent"},[t._v(t._s(e.content))]),i("v-uni-view",[t._l(e.replies,function(a,n){return[i("v-uni-view",{key:n+"_0",staticClass:"postCom"},[i("v-uni-text",{staticClass:"cur"},[t._v(t._s(a.user.name))]),i("v-uni-text",[t._v("回复")]),i("v-uni-text",{staticClass:"cur"},[t._v(t._s(e.user.name)+"：")]),i("v-uni-view",[t._v(t._s(a.content))])],1)]})],2),i("v-uni-view",{staticClass:"rightBottom"},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-text",[t._v(t._s(e.floor)+"楼")]),i("v-uni-text",[t._v(t._s(e.created_at))])],1),i("uni-icon",{staticClass:"iconfont iconhuifu active",attrs:{type:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.reply(e.id,1)}}})],1)],1)],1)]})],2)],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-input",{attrs:{type:"text",value:t.postContent,focus:t.focus,placeholder:"发表评论..."},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getContent.apply(void 0,arguments)}}}),i("uni-icon",{staticClass:"iconfont iconziyuan icon",attrs:{type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postDiscuss.apply(void 0,arguments)}}}),0==t.articleDetail.is_collections?i("uni-icon",{staticClass:"iconfont iconzanzan",attrs:{type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickZan.apply(void 0,arguments)}}}):t._e(),1==t.articleDetail.is_collections?i("uni-icon",{staticClass:"iconfont icondianzan active",attrs:{type:""}}):t._e()],1)],1)},o=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return a})},cca5:function(t,e,i){"use strict";var a=i("1d5f"),n=i.n(a);n.a}}]);