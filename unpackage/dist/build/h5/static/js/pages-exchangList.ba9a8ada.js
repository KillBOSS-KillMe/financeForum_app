(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-exchangList"],{"069b":function(t,e,i){"use strict";i.r(e);var n=i("c003"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},9549:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"exchangList"},[i("v-uni-view",{staticClass:"head"},[i("v-uni-view",{staticClass:"headInfo"},[i("v-uni-view",{staticClass:"headLeft"},[i("v-uni-image",{attrs:{src:t.imgUrl+t.cityInfo.img,mode:""}}),i("v-uni-text",[t._v(t._s(t.cityInfo.title))])],1),0==t.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow("city")}}},[t._v("关注")]):t._e(),1==t.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow("city")}}},[t._v("已关注")]):t._e()],1),i("v-uni-view",{staticClass:"headList"},[t._l(t.tipList,(function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"headItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-text",{staticClass:"tip"},[t._v("置顶")]),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.title))])],1)]})),t.tipList.length<t.total?i("v-uni-text",{staticClass:"more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getMore.apply(void 0,arguments)}}},[t._v("查看更多")]):t._e()],2)],1),i("v-uni-view",{staticClass:"content"},[t._l(t.list,(function(e,n){return[e.user.id!=t.userInfo?i("v-uni-view",{key:n+"_0",staticClass:"contentItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-image",{attrs:{src:t.imgUrl+e.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"headTitle"},[t._v(t._s(e.user.name))]),i("v-uni-text",{staticClass:"form"},[t._v(t._s(e.created_at))])],1),i("v-uni-view",{staticClass:"itemContent"},[t._v(t._s(e.content))])],1)],1):t._e(),e.user.id==t.userInfo?i("v-uni-view",{key:n+"_1",staticClass:"contentItem contentRight",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-image",{attrs:{src:t.imgUrl+e.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"headTitle"},[t._v(t._s(e.user.name))]),i("v-uni-text",{staticClass:"form"},[t._v(t._s(e.created_at))])],1),i("v-uni-view",{staticClass:"itemContent"},[t._v(t._s(e.content))])],1)],1):t._e()]}))],2),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-input",{attrs:{type:"text",value:t.inputValue,placeholder:"写评论","placeholder-class":"postContent"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputV.apply(void 0,arguments)}}}),i("uni-icons",{staticClass:"iconfont iconziyuan",attrs:{type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postContent.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"post",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getPost.apply(void 0,arguments)}}},[i("uni-icon",{staticClass:"iconfont iconxiepinglun",attrs:{type:""}})],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},a892:function(t,e,i){"use strict";i.r(e);var n=i("9549"),a=i("069b");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("c66a");var s,c=i("f0c5"),l=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"6ce07088",null,!1,n["a"],s);e["default"]=l.exports},c003:function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("a3a0")),o=(getApp(),{data:function(){return{imgUrl:"",cityInfo:{},see_sticky:"",list:[],page:"1",pageList:"1",tipList:[],total:"",is_follow:"",token:"",inputValue:"",userInfo:{}}},onLoad:function(t){console.log(t),this.token=uni.getStorageSync("token"),this.imgUrl=a.default.imgUrl,uni.setNavigationBarTitle({title:t.title}),this.cityInfo=t,this.getList(),this.see_stickyList(),this.user()},methods:{user:function(){var t=this;uni.request({url:"".concat(a.default.requestUrl,"/me"),method:"POST",header:{authorization:this.token},success:function(e){uni.hideLoading(),e=a.default.null2str(e),t.userInfo=e.data.id,console.log(t.userInfo,"+++++---------------------+++")}})},getPost:function(){uni.navigateTo({url:"/pages/post?id=".concat(this.cityInfo.id)})},getMore:function(){this.page++,this.see_stickyList()},onReachBottom:function(){this.pageList++,this.getList()},inputV:function(t){console.log(t),this.inputValue=t.detail.value},postContent:function(){var t=this;if(""==this.inputValue)return uni.showToast({title:"请输入发表内容",icon:"none"}),!1;uni.request({url:"".concat(a.default.requestUrl,"/message/sendMessageWithCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,content:this.inputValue},success:function(e){e=a.default.null2str(e),console.log(e,"**************"),200==e.data.status_code&&(uni.showToast({title:e.data.message,icon:"none"}),t.list=[],t.pageList="1",t.inputValue="",t.getList())}})},getList:function(){var t=this;uni.request({url:"".concat(a.default.requestUrl,"/message/getMessageByCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,page:this.pageList,page_size:"10"},success:function(e){e=a.default.null2str(e),console.log(e,"++++++++"),200==e.data.status_code&&(console.log(e.data.data.data,"/////////////////////////////////"),t.list=t.list.concat(e.data.data.data),t.is_follow=e.data.is_follow)}})},see_stickyList:function(){var t=this;uni.request({url:"".concat(a.default.requestUrl,"/posts/city-posts"),method:"GET",header:{authorization:this.token},data:{city_id:this.cityInfo.id,see_sticky:"1",page:this.page,page_size:"3"},success:function(e){e=a.default.null2str(e),console.log(e,"++++++++"),200==e.data.status_code&&(t.total=e.data.total,t.tipList=t.tipList.concat(e.data.data))}})},addFollow:function(t){var e=this;uni.request({url:"".concat(a.default.requestUrl,"/user/add_follow"),method:"POST",header:{authorization:this.token},data:{follow_id:this.cityInfo.id,type:t},success:function(t){uni.hideLoading(),t=a.default.null2str(t),console.log(t),200==t.data.status_code?(uni.showToast({title:t.data.message,icon:"none",duration:2e3}),e.is_follow=1):uni.showToast({title:t.data.message,icon:"none"})}})}}});e.default=o},c66a:function(t,e,i){"use strict";var n=i("ca63"),a=i.n(n);a.a},ca63:function(t,e,i){var n=i("f4f7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("7b2e533b",n,!0,{sourceMap:!1,shadowMode:!1})},f4f7:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-6ce07088]{background-color:#f8f8f8}.head[data-v-6ce07088]{padding:%?18?%;background-color:#fff;border-radius:%?8?%;width:%?690?%;padding:%?20?% %?30?%}.exchangList[data-v-6ce07088]{width:%?750?%}.headInfo[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e8e8e8;padding-bottom:%?10?%}.headInfo .headLeft[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.post[data-v-6ce07088]{width:%?96?%;height:%?96?%;border-radius:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:0 auto;background-image:-webkit-linear-gradient(#a1ddf9,#6bd2f4);background-image:linear-gradient(#a1ddf9,#6bd2f4);position:fixed;z-index:9;right:0;top:60vh}.post .iconfont[data-v-6ce07088]{color:#fff!important;font-size:%?46?%}.headInfo .headLeft uni-image[data-v-6ce07088]{width:%?100?%;height:%?100?%;overflow:hidden;border-radius:%?8?%;margin-right:%?14?%}.headInfo .headLeft > uni-text[data-v-6ce07088]{font-size:%?28?%;color:#000;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.headInfo > uni-text[data-v-6ce07088]{padding:%?6?% %?18?%;background-color:#2390dc;border-radius:%?10?%;color:#fff;font-size:%?26?%}.headList .headItem[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?16?%}.headList .headItem .tip[data-v-6ce07088]{color:#e22929;font-size:%?22?%;border:%?1?% solid #e22929;padding:0 %?10?%;border-radius:%?8?%;margin-right:%?12?%}.headList .headItem .text[data-v-6ce07088]{width:%?542?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:%?26?%;text-align:left;color:#333}.more[data-v-6ce07088]{font-size:%?26?%;text-align:center;color:#999;border-top:%?1?% solid #e8e8e8;padding-top:%?16?%;margin-top:%?16?%}.content[data-v-6ce07088]{margin-top:%?18?%;background-color:#fff;border-radius:%?8?%;padding:%?18?% %?30?% %?100?%;width:%?690?%}.contentItem[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:flex-start;align-content:flex-start;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding:%?30?% 0;border-bottom:%?1?% solid #ccc}.contentItem > uni-image[data-v-6ce07088]{width:%?80?%;height:%?80?%;border-radius:%?80?%;overflow:hidden}.contentItem .right[data-v-6ce07088]{width:%?560?%}.contentItem .right .title[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.headTitle[data-v-6ce07088]{width:%?300?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:%?28?%;font-weight:700;text-align:left;color:#333;margin-bottom:%?10?%}.contentItem .right .title .form[data-v-6ce07088]{color:#2390dc;font-weight:400;width:%?170?%;overflow:hidden;\r\n\t/* text-overflow: ellipsis; */white-space:nowrap;font-size:%?28?%;font-weight:700;text-align:right}.contentRight[data-v-6ce07088]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.contentRight .right .title[data-v-6ce07088]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.contentRight .headTitle[data-v-6ce07088]{text-align:right}.contentRight .itemContent[data-v-6ce07088]{text-align:right!important}.contentItem .right .itemContent[data-v-6ce07088]{-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;font-size:%?28?%;\r\n\t/* font-weight: 700; */text-align:left;color:#666;line-height:%?46?%}.contentItem .right .icon[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:%?8?%}.contentItem .right .icon .iconRight[data-v-6ce07088],\r\n.contentItem .right .icon .iconRight > uni-view[data-v-6ce07088]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.contentItem .right .icon uni-text[data-v-6ce07088]{font-size:%?24?%;font-weight:400;text-align:left;color:#999}.contentItem .right .iconfont[data-v-6ce07088]{font-size:%?26?%;color:#999;margin:0 %?6?% 0 %?10?%}.bottom[data-v-6ce07088]{width:%?690?%;padding:%?20?% %?30?%;background-color:#fff;position:fixed;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-top:%?1?% solid #b8b8b8;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bottom uni-input[data-v-6ce07088]{width:%?550?%;height:%?30?%;padding:%?14?% %?20?%;border-radius:%?30?%;border:%?1?% solid #b8b8b8;color:#000;font-size:%?28?%}.bottom .iconfont[data-v-6ce07088]{color:#b8b8b8;font-size:%?60?%}.postContent[data-v-6ce07088]{color:#b8b8b8;font-size:%?28?%}body.?%PAGE?%[data-v-6ce07088]{background-color:#f8f8f8}",""]),t.exports=e}}]);