(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-exchangList"],{"0d58":function(t,e,i){var n=i("ddd9");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("78b7d373",n,!0,{sourceMap:!1,shadowMode:!1})},"16f7":function(t,e,i){"use strict";(function(t){var n=i("ee27");i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("4e16")),o=(getApp(),{data:function(){return{imgUrl:"",cityInfo:{},see_sticky:"",list:[],page:"1",pageList:"1",tipList:[],total:"",is_follow:"",token:"",inputValue:"",userInfo:{}}},onLoad:function(e){t("log",e," at pages/exchangList.vue:85"),this.token=uni.getStorageSync("token"),this.imgUrl=a.default.imgUrl,uni.setNavigationBarTitle({title:e.title}),this.cityInfo=e,this.getList(),this.see_stickyList(),this.user()},methods:{user:function(){var e=this;uni.request({url:"".concat(a.default.requestUrl,"/me"),method:"POST",header:{authorization:this.token},success:function(i){uni.hideLoading(),i=a.default.null2str(i),e.userInfo=i.data.id,t("log",e.userInfo,"+++++---------------------+++"," at pages/exchangList.vue:108")}})},getPost:function(){uni.navigateTo({url:"/pages/post?id=".concat(this.cityInfo.id)})},getMore:function(){this.page++,this.see_stickyList()},onReachBottom:function(){this.pageList++,this.getList()},inputV:function(e){t("log",e," at pages/exchangList.vue:134"),this.inputValue=e.detail.value},postContent:function(){var e=this;if(""==this.inputValue)return uni.showToast({title:"请输入发表内容",icon:"none"}),!1;uni.request({url:"".concat(a.default.requestUrl,"/message/sendMessageWithCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,content:this.inputValue},success:function(i){i=a.default.null2str(i),t("log",i,"**************"," at pages/exchangList.vue:157"),200==i.data.status_code&&(uni.showToast({title:i.data.message,icon:"none"}),e.list=[],e.pageList="1",e.inputValue="",e.getList())}})},getList:function(){var e=this;uni.request({url:"".concat(a.default.requestUrl,"/message/getMessageByCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,page:this.pageList,page_size:"10"},success:function(i){i=a.default.null2str(i),t("log",i,"++++++++"," at pages/exchangList.vue:187"),200==i.data.status_code&&(t("log",i.data.data.data,"/////////////////////////////////"," at pages/exchangList.vue:190"),e.list=e.list.concat(i.data.data.data),e.is_follow=i.data.is_follow)}})},see_stickyList:function(){var e=this;uni.request({url:"".concat(a.default.requestUrl,"/posts/city-posts"),method:"GET",header:{authorization:this.token},data:{city_id:this.cityInfo.id,see_sticky:"1",page:this.page,page_size:"3"},success:function(i){i=a.default.null2str(i),t("log",i,"++++++++"," at pages/exchangList.vue:212"),200==i.data.status_code&&(e.total=i.data.total,e.tipList=e.tipList.concat(i.data.data))}})},addFollow:function(e){var i=this;uni.request({url:"".concat(a.default.requestUrl,"/user/add_follow"),method:"POST",header:{authorization:this.token},data:{follow_id:this.cityInfo.id,type:e},success:function(e){uni.hideLoading(),e=a.default.null2str(e),t("log",e," at pages/exchangList.vue:235"),200==e.data.status_code?(uni.showToast({title:e.data.message,icon:"none",duration:2e3}),i.is_follow=1):uni.showToast({title:e.data.message,icon:"none"})}})}}});e.default=o}).call(this,i("0de9")["log"])},"4e7b":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"exchangList"},[i("v-uni-view",{staticClass:"head"},[i("v-uni-view",{staticClass:"headInfo"},[i("v-uni-view",{staticClass:"headLeft"},[i("v-uni-image",{attrs:{src:t.imgUrl+t.cityInfo.img,mode:""}}),i("v-uni-text",[t._v(t._s(t.cityInfo.title))])],1),0==t.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow("city")}}},[t._v("关注")]):t._e(),1==t.is_follow?i("v-uni-text",{staticClass:"follow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addFollow("city")}}},[t._v("已关注")]):t._e()],1),i("v-uni-view",{staticClass:"headList"},[t._l(t.tipList,(function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"headItem",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-text",{staticClass:"tip"},[t._v("置顶")]),i("v-uni-text",{staticClass:"text"},[t._v(t._s(e.title))])],1)]})),t.tipList.length<t.total?i("v-uni-text",{staticClass:"more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getMore.apply(void 0,arguments)}}},[t._v("查看更多")]):t._e()],2)],1),i("v-uni-view",{staticClass:"content"},[t._l(t.list,(function(e,n){return[e.user.id!=t.userInfo?i("v-uni-view",{key:n+"_0",staticClass:"contentItem contentLeft",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-image",{attrs:{src:t.imgUrl+e.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"headTitle"},[t._v(t._s(e.user.name))])],1),i("v-uni-view",{staticClass:"itemContent"},[t._v(t._s(e.content))])],1)],1):t._e(),e.user.id==t.userInfo?i("v-uni-view",{key:n+"_1",staticClass:"contentItem contentRight",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDateil(e.id)}}},[i("v-uni-image",{attrs:{src:t.imgUrl+e.user.avatar,mode:""}}),i("v-uni-view",{staticClass:"right clearfix"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"headTitle"},[t._v(t._s(e.user.name))])],1),i("v-uni-view",{staticClass:"itemContent"},[t._v(t._s(e.content))])],1)],1):t._e()]}))],2),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-input",{attrs:{type:"text",value:t.inputValue,placeholder:"写评论","placeholder-class":"postContent"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputV.apply(void 0,arguments)}}}),i("uni-icons",{staticClass:"iconfont iconziyuan",attrs:{type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.postContent.apply(void 0,arguments)}}})],1)],1)},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},8506:function(t,e,i){"use strict";i.r(e);var n=i("16f7"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},d4fd:function(t,e,i){"use strict";var n=i("0d58"),a=i.n(n);a.a},ddd9:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'uni-page-body[data-v-c0742de2]{background-color:#f8f8f8}.head[data-v-c0742de2]{padding:%?18?%;background-color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;width:%?690?%;padding:%?20?% %?30?%}.exchangList[data-v-c0742de2]{width:%?750?%}.headInfo[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid #e8e8e8;padding-bottom:%?10?%}.headInfo .headLeft[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.post[data-v-c0742de2]{width:%?96?%;height:%?96?%;-webkit-border-radius:%?96?%;border-radius:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:0 auto;background-image:-webkit-gradient(linear,left top,left bottom,from(#a1ddf9),to(#6bd2f4));background-image:-webkit-linear-gradient(#a1ddf9,#6bd2f4);background-image:linear-gradient(#a1ddf9,#6bd2f4);position:fixed;z-index:9;right:0;top:60vh}.post .iconfont[data-v-c0742de2]{color:#fff!important;font-size:%?46?%}.headInfo .headLeft uni-image[data-v-c0742de2]{width:%?100?%;height:%?100?%;overflow:hidden;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-right:%?14?%}.headInfo .headLeft > uni-text[data-v-c0742de2]{font-size:%?28?%;color:#000;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.headInfo > uni-text[data-v-c0742de2]{padding:%?6?% %?18?%;background-color:#2390dc;-webkit-border-radius:%?10?%;border-radius:%?10?%;color:#fff;font-size:%?26?%}.headList .headItem[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?16?%}.headList .headItem .tip[data-v-c0742de2]{color:#e22929;font-size:%?22?%;border:%?1?% solid #e22929;padding:0 %?10?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;margin-right:%?12?%}.headList .headItem .text[data-v-c0742de2]{width:%?542?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:%?26?%;text-align:left;color:#333}.more[data-v-c0742de2]{font-size:%?26?%;text-align:center;color:#999;border-top:%?1?% solid #e8e8e8;padding-top:%?16?%;margin-top:%?16?%}.content[data-v-c0742de2]{margin-top:%?18?%;background-color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;padding:%?18?% %?30?% %?100?%;width:%?690?%}.contentItem[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:flex-start;align-content:flex-start;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding:%?30?% 0}.contentItem > uni-image[data-v-c0742de2]{width:%?80?%;height:%?80?%;-webkit-border-radius:%?80?%;border-radius:%?80?%;overflow:hidden}.contentItem .right[data-v-c0742de2]{width:%?574?%}.contentLeft .right .itemContent[data-v-c0742de2]{\r\n\t/* width: 530rpx; */background-color:#218fda;color:#fff;font-size:%?26?%;padding:%?20?%;-webkit-border-radius:0 %?20?% %?20?%;border-radius:0 %?20?% %?20?%;font-weight:600;display:initial}.contentItem .right .title[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:%?10?%}.clearfix[data-v-c0742de2]:after,\r\n.clearfix[data-v-c0742de2]:before{content:"";display:table}.clearfix[data-v-c0742de2]:after{clear:both}.clearfix[data-v-c0742de2]{zoom:1}.headTitle[data-v-c0742de2]{width:%?300?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:%?26?%;text-align:left;color:#676767;margin-bottom:%?10?%}.contentItem .right .title .form[data-v-c0742de2]{color:#2390dc;font-weight:400;width:%?170?%;overflow:hidden;\r\n\t/* text-overflow: ellipsis; */white-space:nowrap;font-size:%?28?%;font-weight:700;text-align:right}.contentRight[data-v-c0742de2]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.contentRight .right .title[data-v-c0742de2]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.contentRight .headTitle[data-v-c0742de2]{text-align:right;color:#676767}.contentRight .itemContent[data-v-c0742de2]{text-align:left!important;font-size:%?26?%;color:#454545;font-weight:600;background-color:#f6f6f6;display:initial;float:right;\r\n\t/* width: 530rpx; */padding:%?20?%;-webkit-border-radius:%?20?% 0 %?20?% %?20?%;border-radius:%?20?% 0 %?20?% %?20?%}\r\n/* .contentItem .right .itemContent {\r\n\t-webkit-line-clamp: 3;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: 700;\r\n/* \ttext-align: left;\r\n\tcolor: #666;\r\n\tline-height: 46rpx;\r\n} */.contentItem .right .icon[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:%?8?%}.contentItem .right .icon .iconRight[data-v-c0742de2],\r\n.contentItem .right .icon .iconRight > uni-view[data-v-c0742de2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.contentItem .right .icon uni-text[data-v-c0742de2]{font-size:%?24?%;font-weight:400;text-align:left;color:#999}.contentItem .right .iconfont[data-v-c0742de2]{font-size:%?26?%;color:#999;margin:0 %?6?% 0 %?10?%}.bottom[data-v-c0742de2]{width:%?690?%;padding:%?20?% %?30?%;background-color:#fff;position:fixed;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-top:%?1?% solid #b8b8b8;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bottom uni-input[data-v-c0742de2]{width:%?550?%;height:%?30?%;padding:%?14?% %?20?%;-webkit-border-radius:%?30?%;border-radius:%?30?%;border:%?1?% solid #b8b8b8;color:#000;font-size:%?28?%}.bottom .iconfont[data-v-c0742de2]{color:#b8b8b8;font-size:%?60?%}.postContent[data-v-c0742de2]{color:#b8b8b8;font-size:%?28?%}body.?%PAGE?%[data-v-c0742de2]{background-color:#f8f8f8}',""]),t.exports=e},fc12:function(t,e,i){"use strict";i.r(e);var n=i("4e7b"),a=i("8506");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("d4fd");var s,d=i("f0c5"),r=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"c0742de2",null,!1,n["a"],s);e["default"]=r.exports}}]);