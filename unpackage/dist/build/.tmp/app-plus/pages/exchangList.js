(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exchangList"],{"069b":function(t,e,a){"use strict";a.r(e);var i=a("1f7c"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"1e74e":function(t,e,a){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}))},"1f7c":function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("a3a0"));function n(t){return t&&t.__esModule?t:{default:t}}getApp();var o={data:function(){return{imgUrl:"",cityInfo:{},see_sticky:"",list:[],page:"1",pageList:"1",tipList:[],total:"",is_follow:"",token:"",inputValue:"",userInfo:{}}},onLoad:function(e){t("log",e," at pages\\exchangList.vue:85"),this.token=i.getStorageSync("token"),this.imgUrl=s.default.imgUrl,i.setNavigationBarTitle({title:e.title}),this.cityInfo=e,this.getList(),this.see_stickyList(),this.user()},methods:{user:function(){var e=this;i.request({url:"".concat(s.default.requestUrl,"/me"),method:"POST",header:{authorization:this.token},success:function(a){i.hideLoading(),a=s.default.null2str(a),e.userInfo=a.data.id,t("log",e.userInfo,"+++++---------------------+++"," at pages\\exchangList.vue:108")}})},getPost:function(){i.navigateTo({url:"/pages/post?id=".concat(this.cityInfo.id)})},getMore:function(){this.page++,this.see_stickyList()},onReachBottom:function(){this.pageList++,this.getList()},inputV:function(e){t("log",e," at pages\\exchangList.vue:134"),this.inputValue=e.detail.value},postContent:function(){var e=this;if(""==this.inputValue)return i.showToast({title:"请输入发表内容",icon:"none"}),!1;i.request({url:"".concat(s.default.requestUrl,"/message/sendMessageWithCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,content:this.inputValue},success:function(a){a=s.default.null2str(a),t("log",a,"**************"," at pages\\exchangList.vue:157"),200==a.data.status_code&&(i.showToast({title:a.data.message,icon:"none"}),e.list=[],e.pageList="1",e.inputValue="",e.getList())}})},getList:function(){var e=this;i.request({url:"".concat(s.default.requestUrl,"/message/getMessageByCityId"),method:"POST",header:{authorization:this.token},data:{city_id:this.cityInfo.id,page:this.pageList,page_size:"10"},success:function(a){a=s.default.null2str(a),t("log",a,"++++++++"," at pages\\exchangList.vue:187"),200==a.data.status_code&&(t("log",a.data.data.data,"/////////////////////////////////"," at pages\\exchangList.vue:190"),e.list=e.list.concat(a.data.data.data),e.is_follow=a.data.is_follow)}})},see_stickyList:function(){var e=this;i.request({url:"".concat(s.default.requestUrl,"/posts/city-posts"),method:"GET",header:{authorization:this.token},data:{city_id:this.cityInfo.id,see_sticky:"1",page:this.page,page_size:"3"},success:function(a){a=s.default.null2str(a),t("log",a,"++++++++"," at pages\\exchangList.vue:212"),200==a.data.status_code&&(e.total=a.data.total,e.tipList=e.tipList.concat(a.data.data))}})},addFollow:function(e){var a=this;i.request({url:"".concat(s.default.requestUrl,"/user/add_follow"),method:"POST",header:{authorization:this.token},data:{follow_id:this.cityInfo.id,type:e},success:function(e){i.hideLoading(),e=s.default.null2str(e),t("log",e," at pages\\exchangList.vue:235"),200==e.data.status_code?(i.showToast({title:e.data.message,icon:"none",duration:2e3}),a.is_follow=1):i.showToast({title:e.data.message,icon:"none"})}})}}};e.default=o}).call(this,a("0de9")["default"],a("6e42")["default"])},"538d":function(t,e,a){},"761c":function(t,e,a){"use strict";(function(t){a("b5b4"),a("921b");i(a("66fd"));var e=i(a("a892"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"800e":function(t,e,a){"use strict";var i=a("538d"),s=a.n(i);s.a},a892:function(t,e,a){"use strict";a.r(e);var i=a("1e74e"),s=a("069b");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("800e");var o,u=a("f0c5"),c=Object(u["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=c.exports}},[["761c","common/runtime","common/vendor"]]]);